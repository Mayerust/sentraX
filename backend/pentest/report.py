from utils.gpt_client import ask_gpt

def do_report(ip, recon, scan, exploit, persist, cleanup, logger):
    prompt = (
        f"Write a pentest report for {ip} including:\n"
        f"Recon: {recon}\nScan: {scan}\nExploit: {exploit}\n"
        f"Persistence: {persist}\nCleanup: {cleanup}"
    )
    report = ask_gpt(prompt)
    logger.info(f"Report generated for {ip}")
    return report